<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>RAFIQ â€” Prototype UI</title>

    <!-- Google font -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="app">
      <header class="topbar">
        <div class="brand">
          <img src="" alt="" class="logo" aria-hidden="true" />
          <h1>RAFIQ</h1>
        </div>

        <div class="top-actions">
          <label class="lang-toggle">
            <select id="langSelect" aria-label="Language switch">
              <option value="en">English</option>
              <option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
            </select>
          </label>

          <button id="rtlBtn" title="Toggle RTL" aria-pressed="false">
            RTL
          </button>
        </div>
      </header>

      <main class="layout">
        <aside class="sidebar" role="navigation" aria-label="Main navigation">
          <nav>
            <ul>
              <li class="active" data-view="home">Home</li>
              <li data-view="child">Child Session</li>
              <li data-view="dashboard">Therapist Dashboard</li>
              <li data-view="cms">CMS</li>
              <li data-view="reports">Reports</li>
            </ul>
          </nav>

          <div class="user-card">
            <div class="avatar" aria-hidden="true">C</div>
            <div>
              <div class="user-name">Child: Ali</div>
              <div class="role">Therapist view</div>
            </div>
          </div>
        </aside>

        <section class="content" id="content">
          <!-- HOME -->
          <div class="view" id="homeView" data-view="home">
            <div class="hero">
              <h2>Welcome to RAFIQ</h2>
              <p>
                Adaptive, AI-assisted therapeutic activities for children with
                ASD â€” prototype UI.
              </p>
              <div class="hero-actions">
                <button id="startSessionBtn">Start Child Session</button>
                <button id="openDashboard">Open Therapist Dashboard</button>
              </div>
            </div>

            <div class="cards-grid">
              <article class="card">
                <h3>Speech Activity</h3>
                <p>Practice words and get instant pronunciation scoring.</p>
                <button data-view="child" class="goto">Open</button>
              </article>

              <article class="card">
                <h3>Emotion Recognition</h3>
                <p>Monitor emotional engagement while the child interacts.</p>
                <button
                  onclick="showToast('Camera placeholder â€” use real model in production')"
                >
                  Demo
                </button>
              </article>

              <article class="card">
                <h3>Therapist Reports</h3>
                <p>Track progress, trends and export PDF reports.</p>
                <button data-view="dashboard" class="goto">Open</button>
              </article>
            </div>
          </div>

          <!-- CHILD SESSION -->
          <div class="view hidden" id="childView" data-view="child">
            <div class="session-header">
              <h2>Child Session â€” Speech & Matching</h2>
              <div class="session-controls">
                <button id="endSession">End Session</button>
              </div>
            </div>

            <div class="session-grid">
              <div class="activity-panel">
                <div class="activity-card">
                  <h3>Repeat After Me</h3>
                  <p id="targetWord">
                    Say: <strong id="wordToSay">apple</strong>
                  </p>
                  <div class="speech-area">
                    <button id="micBtn">ðŸŽ¤ Start Listening</button>
                    <div
                      id="speechResult"
                      class="speechResult"
                      aria-live="polite"
                    >
                      â€”
                    </div>
                  </div>
                  <div class="scoring">
                    <div>
                      Pronunciation score: <span id="pronScore">â€”</span>
                    </div>
                  </div>
                </div>

                <div class="activity-card">
                  <h3>Matching Game</h3>
                  <p>Drag the matching image to the empty card.</p>
                  <div class="matching-area" id="matchingArea">
                    <div
                      class="drop-target"
                      id="dropTarget"
                      aria-label="Drop target"
                    >
                      ?
                    </div>
                    <div class="draggables">
                      <img
                        src="https://picsum.photos/seed/1/80/80"
                        draggable="true"
                        class="dragitem"
                        data-name="apple"
                        alt="apple image"
                      />
                      <img
                        src="https://picsum.photos/seed/2/80/80"
                        draggable="true"
                        class="dragitem"
                        data-name="banana"
                        alt="banana image"
                      />
                      <img
                        src="https://picsum.photos/seed/3/80/80"
                        draggable="true"
                        class="dragitem"
                        data-name="orange"
                        alt="orange image"
                      />
                    </div>
                  </div>
                  <div
                    id="matchFeedback"
                    class="matchFeedback"
                    aria-live="polite"
                  ></div>
                </div>
              </div>

              <div class="camera-panel">
                <div class="video-placeholder">
                  <video id="video" autoplay muted playsinline></video>
                  <div class="camera-controls">
                    <button id="camToggle">Start Camera</button>
                    <div class="info">
                      Eye contact: <span id="eyeContact">â€”</span><br />
                      Attention: <span id="attentionLevel">â€”</span>
                    </div>
                  </div>
                </div>

                <div class="session-stats">
                  <h4>Session Stats</h4>
                  <ul>
                    <li>
                      Correct matches: <strong id="statMatches">0</strong>
                    </li>
                    <li>
                      Average pronunciation: <strong id="statPron">â€”</strong>
                    </li>
                    <li>Time elapsed: <strong id="statTime">00:00</strong></li>
                  </ul>
                </div>
              </div>
            </div>
          </div>

          <!-- DASHBOARD -->
          <div class="view hidden" id="dashboardView" data-view="dashboard">
            <div class="dashboard-header">
              <h2>Therapist Dashboard</h2>
              <div class="dash-actions">
                <button id="exportReportBtn">Export Report (Print)</button>
              </div>
            </div>

            <div class="dash-grid">
              <div class="chart-card">
                <h3>Pronunciation Accuracy (last 7 sessions)</h3>
                <canvas
                  id="accuracyChart"
                  height="160"
                  aria-label="Pronunciation chart"
                ></canvas>
              </div>

              <div class="metric-card">
                <h3>Attention</h3>
                <div class="meter">
                  <div
                    class="meter-fill"
                    id="attentionFill"
                    style="width: 60%"
                  ></div>
                </div>
                <p>Average attention: <strong id="attentionAvg">60%</strong></p>
              </div>

              <div class="recent-card">
                <h3>Recent Sessions</h3>
                <ul id="recentList" class="recent-list">
                  <!-- populated by JS -->
                </ul>
              </div>
            </div>
          </div>

          <!-- CMS -->
          <div class="view hidden" id="cmsView" data-view="cms">
            <div class="cms-header">
              <h2>Content Management</h2>
              <div>
                <input id="newActivityTitle" placeholder="New activity title" />
                <button id="addActivityBtn">Add</button>
              </div>
            </div>

            <div class="cms-list" id="cmsList">
              <!-- items -->
            </div>
          </div>

          <!-- REPORTS -->
          <div class="view hidden" id="reportsView" data-view="reports">
            <div class="reports-header">
              <h2>Reports</h2>
              <p>
                Generate weekly or monthly PDF performance summaries
                (print-friendly).
              </p>
              <button onclick="window.print()">Print This Report</button>
            </div>

            <div class="report-content">
              <h3>Child: Ali â€” Weekly Summary</h3>
              <p>Pronunciation avg: 72% â€” Attention avg: 66%</p>
              <table class="report-table">
                <thead>
                  <tr>
                    <th>Date</th>
                    <th>Accuracy</th>
                    <th>Attention</th>
                  </tr>
                </thead>
                <tbody id="reportTableBody"></tbody>
              </table>
            </div>
          </div>
        </section>
      </main>

      <footer class="footer">
        <small>RAFIQ prototype â€¢ Demo UI â€” not a production system</small>
      </footer>

      <div id="toast" class="toast" role="status" aria-live="polite"></div>
    </div>

    <script src="app.js"></script>
  </body>
</html>
